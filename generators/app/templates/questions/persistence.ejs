

# Persistence
  - variable: persistence.enabled
    default: false
    description: ''
    type: boolean
    required: true
    label: enabled
    show_subquestion_if: true
    group: Persistence
    subquestions:
      - variable: persistence.size
        default: 1Gi
        description: ''
        type: string
        required: true
        label: size
      - variable: persistence.storageClass
        default: ''
        description: ''
        type: storageclass
        required: false
        label: 'storage class'
      - variable: persistence.accessMode
        default: ReadWriteOnce
        description: ''
        type: enum
        options:
          - ReadWriteOnce
          - ReadWriteMany
          - ReadOnlyMany
        required: false
        label: 'access mode'
      - variable: persistence.existingClaim
        default: ''
        description: ''
        type: string
        required: false
        label: 'existing claim'
      - variable: persistence.velero.enabled
        default: false
        description: ''
        type: boolean
        required: true
        label: 'velero enabled'
      - variable: persistence.stash.enabled
        default: false
        description: ''
        type: boolean
        required: true
        label: 'stash enabled'
      - variable: persistence.stash.paused
        default: false
        description: ''
        type: boolean
        required: true
        show_if: persistence.stash.enabled=true
        label: 'stash paused'
      - variable: persistence.stash.type
        default: s3
        description: ''
        type: enum
        options:
          - gcs
          - s3
          - azure
        required: false
        show_if: persistence.stash.enabled=true
        label: 'stash type'
      - variable: persistence.stash.container
        default: ''
        description: ''
        type: string
        required: false
        show_if: persistence.stash.type=azure&&persistence.stash.enabled=true
        label: 'stash container'
      - variable: persistence.stash.bucket
        default: ''
        description: ''
        type: string
        required: false
        show_if: persistence.stash.enabled=true
        label: 'stash bucket'
      - variable: persistence.stash.endpoint
        default: s3.amazonaws.com
        description: ''
        type: string
        required: true
        show_if: persistence.stash.type=s3&&persistence.stash.enabled=true
        label: 'stash endpoint'
      - variable: persistence.stash.schedule
        default: '0 0 * * *'
        description: ''
        type: string
        required: true
        show_if: persistence.stash.enabled=true
        label: 'stash schedule'
      - variable: persistence.stash.keepLast
        default: 30
        description: ''
        type: int
        required: true
        show_if: persistence.stash.enabled=true
        label: 'stash keep last'
      - variable: persistence.stash.restore.snapshot.data
        default: ''
        description: ''
        type: string
        required: false
        show_if: persistence.stash.enabled=true
        label: 'stash restore snapshot data'<% for (var i = 0; i < databases.length; i++) { database = databases[i]; if (database.name !== 'redis') { %>
      - variable: persistence.stash.restore.snapshot.<%- _.camelCase(database.name) %>
        default: ''
        description: ''
        type: string
        required: false
        show_if: persistence.stash.enabled=true&&config.<%- _.camelCase(database.name) %>.internal=true
        label: 'stash restore snapshot <%- _.camelCase(database.name) %>'<% }} %>